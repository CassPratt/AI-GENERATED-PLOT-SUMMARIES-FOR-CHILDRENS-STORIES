<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI-GPSCS</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh; /* Ensure content takes at least the full height of the viewport */
            position: relative; /* Needed for the sticky footer */
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f8ff; /* Light Blue background color */
            color: #333; /* Dark Gray text color */
        }

        h1 {
            background-color: #87CEEB; /* Sky Blue background color for headers */
            color: #fff; /* White text color for headers */
            padding: 10px;
            margin: 20 px 0;
        }

        #content {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding: 20px;
        }

        .summary {
            width: 45%;
            background-color: #fff; /* White background color for summary boxes */
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* Shadow effect */
        }

        footer {
            background-color: #87CEEB; /* Sky Blue background color for footer */
            color: #fff; /* White text color for footer */
            padding: 10px;
            text-align: center;
            position: absolute;
            bottom: 0;
            width: 100%;
        }

        /* Style for custom file input */
        .custom-file-input-label {
            display: inline-block;
            padding: 8px 12px;
            cursor: pointer;
            background-color: #3498db; /* Button background color */
            color: #fff; /* Button text color */
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .custom-file-input-label:hover {
            background-color: #2980b9; /* Button background color on hover */
        }

        /* Hide the actual file input */
        #fileInput {
            display: none;
        }
    </style>
    <!-- Include jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
</head>
<body>
    <h1 id="pageTitle">AI-GPSCS: AI-Generated Plot Summaries for Children's Stories</h1>

    <form id="summaryForm" action="/generate_summary" method="post" enctype="multipart/form-data">
        <!-- Language selection dropdown -->
        <label for="languageSelect" id="languageLabel">Select Language:</label>
        <select id="languageSelect" name="language">
            <option value="english">English</option>
            <option value="spanish">Español</option>
        </select>

        <!-- New div for "Choose File" and "Generate Summary" buttons with margin-top -->
        <div style="margin-top: 10px;">
            <!-- Custom file input -->
            <label for="fileInput" class="custom-file-input-label" id="fileInputLabel">Choose File</label>
            <input type="file" name="selected_file" accept="image/*" id="fileInput" onchange="updateFileName(this)">

            <!-- Display the selected file name -->
            <span id="selectedFileName"></span>

            <!-- Submit button with the same style as "Choose File" button -->
            <input type="submit" value="Generate Summary" class="custom-file-input-label" id="submitButton">
        </div>

        <script>
            // JavaScript function to update the selected file name
            function updateFileName(input) {
                const fileName = input.files[0].name;
                document.getElementById('selectedFileName').textContent = fileName;
            }
        </script>

            </form>

            <!-- Display the selected image if available -->
            {% if result %}
        <p>Filename: {{ result.filename }}</p>

        <!-- Display the image -->
        <img src="data:image/png;base64,{{ result.encoded_image }}" alt="{{ result.filename }}" style="max-width: 100px;">

        <!-- Display the strings in columns -->
        <div id="content">
            {% for string in result.additional_strings %}
                <div class="summary">
                    <h2>Summary {{ loop.index }}</h2>
                    <pre style="white-space: pre-wrap;">{{ string }}</pre>
                </div>
            {% endfor %}
        </div>
    {% endif %}
    
    <footer>
        <p id="footerText">Made by Cassandra Pratt Romero</p>
    </footer>

    <!-- Add JavaScript to change language dynamically -->
    <script>
        $(document).ready(function() {
            // Define language-specific text
            const languageText = {
                'english': {
                    'pageTitle': 'AI-GPSCS: AI-Generated Plot Summaries for Children\'s Stories',
                    'languageLabel': 'Select Language:',
                    'submitButton': 'Generate Summary',
                    'fileInputLabel': 'Choose File',
                    'footerText': 'Made by Cassandra Pratt Romero',
                },
                'spanish': {
                    'pageTitle': 'AI-GPSCS: Resúmenes de trama generados por IA para historias infantiles',
                    'languageLabel': 'Seleccionar Idioma:',
                    'submitButton': 'Generar Resumen',
                    'fileInputLabel': 'Elegir Archivo',
                    'footerText': 'Hecho por Cassandra Pratt Romero',
                },
            };

            // Initial language setting
            const defaultLanguage = 'english';
            updateLanguage(defaultLanguage);

            // Language dropdown change event
            $('#languageSelect').change(function() {
                const selectedLanguage = $(this).val();
                updateLanguage(selectedLanguage);
            });

            function updateLanguage(language) {
                // Update page title
                $('#pageTitle').text(languageText[language]['pageTitle']);

                // Update language label
                $('#languageLabel').text(languageText[language]['languageLabel']);

                // Update submit button text
                $('#submitButton').val(languageText[language]['submitButton']);

                // Update file input label
                $('#fileInputLabel').text(languageText[language]['fileInputLabel']);
            }

             $('#summaryForm').submit(function() {
                // Delay the disabling of input elements
                setTimeout(function() {
                    $('#loadingMessage').show();
                    $('#fileInput, #submitButton').prop('disabled', true);
                }, 100);
            });
        });
    </script>
</body>
</html>
